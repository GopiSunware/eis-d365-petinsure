# PetInsure360 - Pet Insurance Data Platform

**Enterprise Data Platform Demo for IPH (Independence Pet Holdings)**

A complete Azure-based data platform demonstrating medallion lakehouse architecture, Customer Data Platform (CDP), and GenAI-powered claims processing for pet insurance.

---

## ğŸš€ Live Demo (Azure-Hosted) - Updated 2026-01-01

| Application | URL | Description |
|-------------|-----|-------------|
| **Customer Portal** | [petinsure360frontend.z5.web.core.windows.net](https://petinsure360frontend.z5.web.core.windows.net) | Customer portal: register, add pets, buy policies, submit claims |
| **Backend API** | [petinsure360-backend.azurewebsites.net](https://petinsure360-backend.azurewebsites.net) | FastAPI backend with Swagger docs at `/docs` |
| **API Docs** | [/docs](https://petinsure360-backend.azurewebsites.net/docs) | Interactive Swagger API documentation |
| **Databricks** | [adb-7405619408519767.7.azuredatabricks.net](https://adb-7405619408519767.7.azuredatabricks.net) | ETL notebooks and Delta Lake demo |

### Demo Features
- **28 Pre-built Claim Scenarios**: Quick-fill realistic claim data organized by category
  - **3 Fraud Scenarios**: Chronic condition gaming, provider collusion, staged timing
  - **5 Validation Scenarios**: Diagnosis-treatment mismatch, missing prerequisites, license issues
  - **20 Standard Scenarios**: Chocolate toxicity, ACL surgery, cancer treatment, etc.
- **Medallion Pipeline Visualization**: Interactive Bronze â†’ Silver â†’ Gold data flow at `/pipeline`
- **Real-time WebSocket Updates**: Dashboard auto-refreshes when claims are submitted
- **Manual Pipeline Triggers**: Click to process claims through each layer
- **Rule vs AI Comparison**: Same scenarios work with EIS Portal for side-by-side comparison

### Demo Data
- **5,000** Customers with diverse profiles
- **6,500** Pets (dogs, cats, exotic)
- **6,000** Active policies
- **15,000** Claims with various statuses
- **200** Veterinary providers

---

## End-to-End Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PetInsure360 - Complete E2E Data Flow                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FRONTEND SPA   â”‚    â”‚  BACKEND API    â”‚    â”‚        AZURE DATA PLATFORM          â”‚  â”‚
â”‚  â”‚  (React)        â”‚    â”‚  (FastAPI)      â”‚    â”‚                                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚  â”‚     ADLS Gen2 (Delta Lake)      â”‚â”‚  â”‚
â”‚  â”‚ Customer Portal â”‚â”€â”€â”€â–¶â”‚ REST Endpoints  â”‚â”€â”€â”€â–¶â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚  â”‚
â”‚  â”‚ â€¢ Register      â”‚    â”‚ â€¢ /customers    â”‚    â”‚  â”‚  â”‚ raw/  â”‚ â”‚bronze/â”‚ â”‚silver/â”‚ â”‚â”‚  â”‚
â”‚  â”‚ â€¢ Add Pet       â”‚    â”‚ â€¢ /pets         â”‚    â”‚  â”‚  â”‚ JSON  â”‚ â”‚ Delta â”‚ â”‚ Delta â”‚ â”‚â”‚  â”‚
â”‚  â”‚ â€¢ Buy Policy    â”‚    â”‚ â€¢ /policies     â”‚    â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â”‚â”‚  â”‚
â”‚  â”‚ â€¢ Submit Claim  â”‚â—€â”€â”€â–¶â”‚ â€¢ /claims       â”‚    â”‚  â”‚      â”‚         â”‚         â”‚      â”‚â”‚  â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚ WebSocket â—€â”€â”€â”€â”€â–¶â”‚â—€â”€â”€â–¶â”‚ Socket.IO       â”‚    â”‚         â”‚         â”‚         â”‚       â”‚  â”‚
â”‚  â”‚ (Real-time)     â”‚    â”‚ (Status)        â”‚    â”‚         â–¼         â–¼         â–¼       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚                                                â”‚  â”‚      AZURE DATABRICKS           â”‚â”‚  â”‚
â”‚                                                â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚  â”‚
â”‚                                                â”‚  â”‚   â”‚   ETL Pipeline          â”‚   â”‚â”‚  â”‚
â”‚                                                â”‚  â”‚   â”‚  Bronze â†’ Silver â†’ Gold â”‚   â”‚â”‚  â”‚
â”‚                                                â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚  â”‚
â”‚                                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚                                                â”‚                  â”‚                   â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                  â–¼                   â”‚  â”‚
â”‚  â”‚  BI DASHBOARD   â”‚â—€â”€â”€â”€â”‚  API Gateway    â”‚â—€â”€â”€â”€â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  (React)        â”‚    â”‚  (FastAPI)      â”‚    â”‚  â”‚         GOLD LAYER              â”‚â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚  â”‚  â€¢ customer_360_view            â”‚â”‚  â”‚
â”‚  â”‚ Executive View  â”‚    â”‚ /api/insights   â”‚    â”‚  â”‚  â€¢ claims_analytics             â”‚â”‚  â”‚
â”‚  â”‚ â€¢ KPIs          â”‚    â”‚ /api/kpis       â”‚    â”‚  â”‚  â€¢ monthly_kpis                 â”‚â”‚  â”‚
â”‚  â”‚ â€¢ Claims Trends â”‚    â”‚ /api/customers  â”‚    â”‚  â”‚  â€¢ cross_sell_recommendations   â”‚â”‚  â”‚
â”‚  â”‚ â€¢ CDP 360       â”‚    â”‚ /api/claims     â”‚    â”‚  â”‚  â€¢ provider_performance         â”‚â”‚  â”‚
â”‚  â”‚ â€¢ Risk Scores   â”‚    â”‚ /api/risks      â”‚    â”‚  â”‚  â€¢ risk_scoring                 â”‚â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Architecture Options

We evaluated three approaches for data collection. **Option B** was implemented.

### Option A: Full Stack Enterprise (Event-Driven)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OPTION A - Full Stack Enterprise                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  React SPA â”€â”€â–¶ FastAPI â”€â”€â–¶ Azure Event Hub â”€â”€â–¶ Databricks Streaming     â”‚
â”‚      â”‚            â”‚                                    â”‚                 â”‚
â”‚      â”‚            â–¼                                    â–¼                 â”‚
â”‚      â”‚     PostgreSQL DB                         Delta Lake              â”‚
â”‚      â”‚     (Operational)                         (Analytics)             â”‚
â”‚      â”‚            â”‚                                    â”‚                 â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â–¶ BI Dashboard â”‚
â”‚                                                                          â”‚
â”‚  Features:                                                               â”‚
â”‚  â€¢ Real-time streaming with Event Hub/Kafka                              â”‚
â”‚  â€¢ Dual write pattern (OLTP + OLAP)                                      â”‚
â”‚  â€¢ Change Data Capture (CDC)                                             â”‚
â”‚  â€¢ Sub-second latency for operational queries                            â”‚
â”‚                                                                          â”‚
â”‚  Complexity: HIGH    |    Build Time: 2-3 days                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option B: Simplified Demo (Implemented)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OPTION B - Simplified Demo                            â”‚
â”‚                         ** IMPLEMENTED **                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  React SPA â”€â”€â–¶ FastAPI â”€â”€â–¶ Write JSON to ADLS â”€â”€â–¶ Databricks ETL        â”‚
â”‚      â”‚            â”‚                                    â”‚                 â”‚
â”‚      â”‚            â”‚        WebSocket/Socket.io         â”‚                 â”‚
â”‚      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€(Real-time Status)        â”‚                 â”‚
â”‚      â”‚            â”‚                                    â–¼                 â”‚
â”‚      â”‚            â”‚                              Delta Lake              â”‚
â”‚      â”‚            â”‚                              (Gold Layer)            â”‚
â”‚      â”‚            â”‚                                    â”‚                 â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â–¶ BI Dashboard â”‚
â”‚                                                                          â”‚
â”‚  Features:                                                               â”‚
â”‚  â€¢ Direct write to ADLS Gen2 (JSON files)                                â”‚
â”‚  â€¢ Existing Databricks ETL processes new data                            â”‚
â”‚  â€¢ WebSocket for real-time status updates                                â”‚
â”‚  â€¢ Simple polling for dashboard refresh                                  â”‚
â”‚                                                                          â”‚
â”‚  Complexity: MEDIUM  |    Build Time: 1 day                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option C: API Layer Only

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OPTION C - API Layer Only                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  FastAPI + Swagger UI â”€â”€â–¶ Write to ADLS â”€â”€â–¶ Databricks ETL              â”‚
â”‚         â”‚                                        â”‚                       â”‚
â”‚         â”‚                                        â–¼                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Delta Lake â”€â”€â–¶ BI Dashboard  â”‚
â”‚                                                                          â”‚
â”‚  Features:                                                               â”‚
â”‚  â€¢ API-first approach with auto-generated Swagger docs                   â”‚
â”‚  â€¢ No frontend development needed                                        â”‚
â”‚  â€¢ Test via Postman/curl                                                 â”‚
â”‚                                                                          â”‚
â”‚  Complexity: LOW     |    Build Time: 4-6 hours                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Data Flow (Option B - Implemented)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DATA INGESTION FLOW                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                         â”‚
â”‚  1. USER INTERACTION                                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                  â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚     CUSTOMER PORTAL (React)      â”‚                                                   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                                                   â”‚
â”‚  â”‚  â”‚ Register   â”‚ â”‚ Add Pet    â”‚   â”‚                                                   â”‚
â”‚  â”‚  â”‚ Customer   â”‚ â”‚ Profile    â”‚   â”‚                                                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚                                                   â”‚
â”‚  â”‚        â”‚              â”‚          â”‚                                                   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”   â”‚                                                   â”‚
â”‚  â”‚  â”‚ Purchase   â”‚ â”‚ Submit     â”‚   â”‚                                                   â”‚
â”‚  â”‚  â”‚ Policy     â”‚ â”‚ Claim      â”‚   â”‚                                                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚                                                   â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                  â”‚                                                                      â”‚
â”‚                  â–¼                                                                      â”‚
â”‚  2. API PROCESSING                                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                      â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚     FASTAPI BACKEND              â”‚                                                   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                   â”‚
â”‚  â”‚  â”‚ POST /api/customers        â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ POST /api/pets             â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ POST /api/policies         â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ POST /api/claims           â”‚  â”‚                                                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                   â”‚
â”‚  â”‚                â”‚                 â”‚                                                   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                   â”‚
â”‚  â”‚  â”‚ Azure Storage SDK          â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ â€¢ Validate data            â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ â€¢ Generate UUID            â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ â€¢ Write JSON to ADLS       â”‚  â”‚                                                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                   â”‚
â”‚  â”‚                â”‚                 â”‚                                                   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                   â”‚
â”‚  â”‚  â”‚ Socket.IO                  â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ â€¢ Broadcast status update  â”‚  â”‚â”€â”€â”€â”€â”€â”€â–¶ Real-time UI Update                        â”‚
â”‚  â”‚  â”‚ â€¢ "claim_submitted"        â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ â€¢ "processing"             â”‚  â”‚                                                   â”‚
â”‚  â”‚  â”‚ â€¢ "completed"              â”‚  â”‚                                                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                  â”‚                                                                      â”‚
â”‚                  â–¼                                                                      â”‚
â”‚  3. STORAGE LAYER                                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                       â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                    ADLS GEN2 (petinsud7i43)                              â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  raw/ container                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ customers/                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ batch_20241223_001.json  (existing synthetic)            â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€ customer_uuid_timestamp.json  (new from UI)              â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ pets/                                                         â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€ pet_uuid_timestamp.json                                   â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ policies/                                                     â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€ policy_uuid_timestamp.json                                â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â””â”€â”€ claims/                                                       â”‚  â”‚           â”‚
â”‚  â”‚  â”‚      â””â”€â”€ claim_uuid_timestamp.json                                 â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                  â”‚                                                                      â”‚
â”‚                  â–¼                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ETL PROCESSING FLOW                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                         â”‚
â”‚  4. DATABRICKS ETL PIPELINE                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                    AZURE DATABRICKS                                      â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  01_bronze_ingestion.py                                            â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ Read JSON/CSV from raw/                                         â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ Add metadata (_ingestion_timestamp, _source_file, _batch_id)    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ Write to Bronze Delta tables                                    â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â”‚                                   â”‚                                      â”‚           â”‚
â”‚  â”‚                                   â–¼                                      â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  02_silver_transformations.py                                      â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ Data type casting & validation                                  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ Deduplication (keep latest)                                     â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ Quality scoring (_quality_score)                                â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ Standardization (phone, email, dates)                           â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â”‚                                   â”‚                                      â”‚           â”‚
â”‚  â”‚                                   â–¼                                      â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  03_gold_aggregations.py                                           â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ customer_360_view (CDP)                                         â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ claims_analytics (fact table with dims)                         â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ monthly_kpis (executive metrics)                                â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ cross_sell_recommendations                                      â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ provider_performance                                            â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â€¢ risk_scoring                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                  â”‚                                                                      â”‚
â”‚                  â–¼                                                                      â”‚
â”‚  5. DELTA LAKE (GOLD LAYER)                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  petinsure_gold database                                                 â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚           â”‚
â”‚  â”‚  â”‚ customer_360    â”‚  â”‚ claims_analyticsâ”‚  â”‚ monthly_kpis    â”‚           â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ 5000 customersâ”‚  â”‚ â€¢ 15000 claims  â”‚  â”‚ â€¢ KPIs by month â”‚           â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ Unified view  â”‚  â”‚ â€¢ All dims      â”‚  â”‚ â€¢ Trends        â”‚           â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ Risk scores   â”‚  â”‚ â€¢ Categories    â”‚  â”‚ â€¢ Growth %      â”‚           â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚           â”‚
â”‚  â”‚  â”‚ cross_sell      â”‚  â”‚ provider_perf   â”‚  â”‚ risk_scoring    â”‚           â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ Opportunities â”‚  â”‚ â€¢ Vet ratings   â”‚  â”‚ â€¢ Risk factors  â”‚           â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ Revenue est   â”‚  â”‚ â€¢ Network stats â”‚  â”‚ â€¢ Categories    â”‚           â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                  â”‚                                                                      â”‚
â”‚                  â–¼                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BI INSIGHTS FLOW                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                         â”‚
â”‚  6. BI API LAYER                                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                         â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                    FASTAPI BI SERVICE                                    â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  Endpoints (Query Gold Layer via Spark/JDBC)                       â”‚  â”‚           â”‚
â”‚  â”‚  â”‚                                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  GET /api/insights/kpis                                            â”‚  â”‚           â”‚
â”‚  â”‚  â”‚      â†’ monthly_kpis (claims, revenue, loss_ratio)                  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚                                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  GET /api/insights/customers/{id}                                  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚      â†’ customer_360_view (full CDP profile)                        â”‚  â”‚           â”‚
â”‚  â”‚  â”‚                                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  GET /api/insights/claims?status=&category=                        â”‚  â”‚           â”‚
â”‚  â”‚  â”‚      â†’ claims_analytics (filtered, paginated)                      â”‚  â”‚           â”‚
â”‚  â”‚  â”‚                                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  GET /api/insights/cross-sell                                      â”‚  â”‚           â”‚
â”‚  â”‚  â”‚      â†’ cross_sell_recommendations (upsell opps)                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚                                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  GET /api/insights/providers                                       â”‚  â”‚           â”‚
â”‚  â”‚  â”‚      â†’ provider_performance (network analytics)                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚                                                                    â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  GET /api/insights/risks                                           â”‚  â”‚           â”‚
â”‚  â”‚  â”‚      â†’ risk_scoring (risk distribution)                            â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                  â”‚                                                                      â”‚
â”‚                  â–¼                                                                      â”‚
â”‚  7. BI DASHBOARD (React)                                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                    BI DASHBOARD                                          â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  EXECUTIVE SUMMARY                                                 â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚ 15,000  â”‚ â”‚  68%    â”‚ â”‚ $2.4M   â”‚ â”‚ 4.2 daysâ”‚                   â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚ Claims  â”‚ â”‚LossRatioâ”‚ â”‚ Premium â”‚ â”‚Avg Proc â”‚                   â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  CLAIMS TRENDS                              CUSTOMER SEGMENTS      â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚      â–„â–„               â”‚                  â”‚ Platinum: 15%     â”‚  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚    â–„â–„â–ˆâ–ˆâ–„â–„             â”‚                  â”‚ Gold: 25%         â”‚  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚  â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„           â”‚                  â”‚ Silver: 35%       â”‚  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         â”‚                  â”‚ Bronze: 25%       â”‚  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚J F M A M J J A S O N Dâ”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  CUSTOMER 360 VIEW                                                 â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚ John Smith | Gold Tier | Risk: Medium | LTV: $2,450          â”‚  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚ Pets: 2 | Policies: 2 | Claims: 5 | Loss Ratio: 72%         â”‚  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â”‚ Cross-sell: Wellness Add-on ($180/yr opportunity)            â”‚  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Features

### 1. Medallion Lakehouse Architecture
- **Bronze**: Raw data ingestion with metadata
- **Silver**: Cleansed, deduplicated, quality-scored data
- **Gold**: Business aggregations and analytics-ready views

### 2. Customer Data Platform (CDP)
- Unified customer 360 view across all touchpoints
- Customer segmentation and value tiers
- Churn risk scoring
- Cross-sell/upsell recommendations

### 3. Claims Analytics
- Real-time claims processing metrics
- Loss ratio analysis
- Provider performance tracking
- Fraud detection patterns

### 4. Risk Scoring
- Multi-factor risk assessment
- Pet age, condition, claims frequency factors
- Actionable recommendations

### 5. GenAI Claims Agent
- 4-agent sequential pipeline
- Document extraction (OCR)
- Policy validation
- Fraud detection
- Automated decision with reasoning

### 6. Real-Time Data Ingestion (NEW)
- React SPA for customer portal
- FastAPI backend with WebSocket
- Direct write to ADLS Gen2
- Seamless integration with existing ETL

### 7. Self-Service BI Dashboard (NEW)
- Web-based executive dashboard
- Customer 360 views
- Claims analytics
- No Power BI dependency

---

## ğŸ“š Documentation

For detailed architecture documentation including data flow diagrams, sequence diagrams, component specifications, and security architecture, see:

**[docs/ARCHITECTURE.md](docs/ARCHITECTURE.md)** - Complete System Architecture Guide

This document covers:
- System layers and component relationships
- Complete data flow from UI to Gold layer
- Sequence diagrams for claim submission
- Entity relationship diagrams
- API specifications
- Security and deployment architecture

---

## Technology Stack

| Layer | Technology |
|-------|------------|
| **Frontend** | React, Vite, TailwindCSS, Socket.io-client |
| **Backend API** | FastAPI, Python-socketio, Azure Storage SDK |
| **Infrastructure** | Terraform, Azure Resource Manager |
| **Storage** | Azure Data Lake Gen2, Delta Lake |
| **ETL** | Azure Databricks (PySpark) |
| **Query Engine** | Azure Synapse Serverless SQL |
| **Orchestration** | Azure Data Factory / Databricks Jobs |
| **Secrets** | Azure Key Vault |
| **GenAI** | Azure OpenAI / Claude |

---

## Project Structure

```
petinsure360/
â”œâ”€â”€ README.md                       # This file
â”œâ”€â”€ infra/
â”‚   â””â”€â”€ main.tf                     # Terraform infrastructure
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ generate_synthetic_data.py  # Data generator
â”‚   â””â”€â”€ raw/                        # Generated data files
â”œâ”€â”€ notebooks/
â”‚   â”œâ”€â”€ 01_bronze_ingestion.py      # Bronze layer ETL
â”‚   â”œâ”€â”€ 02_silver_transformations.py # Silver layer ETL
â”‚   â”œâ”€â”€ 03_gold_aggregations.py     # Gold layer aggregations
â”‚   â”œâ”€â”€ 04_verify_data.py           # Data verification
â”‚   â””â”€â”€ synapse_gold_views.sql      # Synapse external tables
â”œâ”€â”€ frontend/                       # React SPA (NEW)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ services/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/                        # FastAPI Backend (NEW)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ services/
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ bi-dashboard/                   # BI Dashboard (NEW)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ genai/
â”‚   â””â”€â”€ claims_agent.py             # Multi-agent claims processor
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE.md             # Detailed architecture documentation
â”‚   â””â”€â”€ SETUP_GUIDE.md              # Detailed setup instructions
â””â”€â”€ run.sh                          # Start all services script
```

---

## Quick Start

### 1. Deploy Infrastructure
```bash
cd infra
terraform init
terraform apply
```

### 2. Generate & Upload Data
```bash
cd data
python generate_synthetic_data.py

# Upload to Azure
az storage blob upload-batch \
    --account-name petinsud7i43 \
    --destination raw --source ./raw
```

### 3. Run ETL in Databricks
- Import notebooks to Databricks workspace
- Run in order: Bronze â†’ Silver â†’ Gold

### 4. Start Backend API
```bash
cd backend
source ./env_backend/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload --port 8000
```

### 5. Start Frontend Portal
```bash
cd frontend
npm install
npm run dev
```

### 6. Start BI Dashboard
```bash
cd bi-dashboard
npm install
npm run dev
```

---

## Azure Resources (Deployed)

| Resource | Name | Endpoint |
|----------|------|----------|
| Storage Account | petinsud7i43 | petinsud7i43.dfs.core.windows.net |
| Databricks | petinsure360-databricks | adb-7405619408519767.7.azuredatabricks.net |
| Synapse | petins-syn-ud7i43 | petins-syn-ud7i43-ondemand.sql.azuresynapse.net |
| Key Vault | petins-kv-ud7i43 | petins-kv-ud7i43.vault.azure.net |
| Data Factory | petinsure360-adf | - |

---

## Gold Layer Tables

| Table | Description | Records |
|-------|-------------|---------|
| `customer_360_view` | Unified CDP with all customer attributes | 5,000 |
| `claims_analytics` | Detailed claims with dimensions joined | 15,000 |
| `monthly_kpis` | Executive dashboard metrics | 24 |
| `cross_sell_recommendations` | Upsell opportunities | ~2,500 |
| `provider_performance` | Vet network analytics | 200 |
| `risk_scoring` | Customer risk assessment | 5,000 |

---

## API Endpoints

### Data Ingestion API (Backend)

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | /api/customers | Register new customer |
| POST | /api/pets | Add pet to customer |
| POST | /api/policies | Purchase new policy |
| POST | /api/claims | Submit insurance claim |
| GET | /api/claims/{id}/status | Get claim status |
| WS | /ws | WebSocket for real-time updates |

### Pipeline & Scenarios API (NEW)

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | /api/scenarios | List 20 pre-built claim scenarios |
| GET | /api/scenarios/{id} | Get specific scenario details |
| GET | /api/pipeline/status | Pipeline status (Bronze/Silver/Gold counts) |
| GET | /api/pipeline/flow | Data flow visualization |
| GET | /api/pipeline/pending | List pending claims in Bronze |
| POST | /api/pipeline/submit-claim | Submit claim to Bronze layer |
| POST | /api/pipeline/process/bronze-to-silver | Trigger Bronzeâ†’Silver processing |
| POST | /api/pipeline/process/silver-to-gold | Trigger Silverâ†’Gold processing |
| DELETE | /api/pipeline/clear | Reset pipeline state |

### BI Insights API

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | /api/insights/kpis | Monthly KPIs |
| GET | /api/insights/customers | Customer list with filters |
| GET | /api/insights/customers/{id} | Customer 360 view |
| GET | /api/insights/claims | Claims analytics |
| GET | /api/insights/cross-sell | Cross-sell opportunities |
| GET | /api/insights/providers | Provider performance |
| GET | /api/insights/risks | Risk distribution |

---

## Alignment with JD Requirements

| JD Requirement | Implementation |
|----------------|----------------|
| Azure-based data platform | Databricks + Synapse + ADLS Gen2 |
| Medallion lakehouse | Bronze/Silver/Gold layers |
| Real-time streaming | WebSocket + Event-driven architecture |
| Data governance | Quality scoring, lineage, MDM |
| CDP across brands | customer_360_view with unified profile |
| Self-service BI | Custom BI Dashboard (React) |
| SOC 2 / PCI DSS | Key Vault secrets, audit trails |
| Insurance domain | Pet insurance data model |
| GenAI/Agentic | Multi-agent claims processor |

---

## Cost Estimate (Dev Environment)

| Resource | Monthly Cost |
|----------|-------------|
| Storage (10GB) | ~$2 |
| Databricks (10 hrs) | ~$15 |
| Synapse Serverless | ~$5 |
| Key Vault | ~$0.30 |
| **Total** | **~$25/month** |

---

## Author

**Gopinath Varadharajan**
- Email: gopi@sunwaretechnologies.com
- LinkedIn: [linkedin.com/in/vg1111](https://linkedin.com/in/vg1111)
- Phone: 732-910-9735


PetInsure360 is an enterprise-grade demo data platform for Independence Pet Holdings (IPH) - a pet insurance company. It demonstrates a complete Azure-based data solution.

  Architecture Overview

  | Layer        | Technology                   | Purpose                                                           |
  |--------------|------------------------------|-------------------------------------------------------------------|
  | Frontend     | React + Vite + TailwindCSS   | Customer portal (register, add pets, buy policies, submit claims) |
  | Backend      | FastAPI + Socket.IO          | REST API + real-time WebSocket updates                            |
  | Storage      | Azure Data Lake Gen2         | Raw JSON files written directly                                   |
  | ETL          | Azure Databricks (PySpark)   | Medallion architecture processing                                 |
  | Query        | Azure Synapse Serverless     | SQL access to Gold layer                                          |
  | BI Dashboard | React                        | Self-service analytics dashboard                                  |
  | GenAI        | Multi-agent claims processor | 4-agent pipeline for automated claims                             |

  Key Components

  Medallion Lakehouse:
  - Bronze (01_bronze_ingestion.py) - Raw data with metadata
  - Silver (02_silver_transformations.py) - Cleansed, deduplicated, quality-scored
  - Gold (03_gold_aggregations.py) - Business aggregations (customer_360, claims_analytics, KPIs)

  Gold Layer Tables:
  - customer_360_view - Unified CDP (5,000 customers)
  - claims_analytics - Claims with dimensions (15,000 claims)
  - monthly_kpis - Executive metrics
  - cross_sell_recommendations - Upsell opportunities
  - provider_performance - Vet network analytics
  - risk_scoring - Customer risk assessment

  GenAI Claims Agent (genai/claims_agent.py):
  - Document extraction (OCR)
  - Policy validation
  - Fraud detection
  - Automated decision with reasoning

  Data Flow

  User Portal â†’ FastAPI â†’ ADLS (JSON) â†’ Databricks ETL â†’ Delta Lake (Gold) â†’ BI Dashboard

  Infrastructure

  - Terraform-managed (infra/main.tf)
  - Azure resources: Storage, Databricks, Synapse, Key Vault, Data Factory
  - Estimated dev cost: ~$25/month


---



  How to Run

  # Terminal 1: Backend
  cd petinsure360/backend
  pip install -r requirements.txt
  python -m uvicorn app.main:socket_app --reload --port 8000

  # Terminal 2: Frontend Portal
  cd petinsure360/frontend
  npm install
  npm run dev  # http://localhost:3000

  # Terminal 3: BI Dashboard
  cd petinsure360/bi-dashboard
  npm install
  npm run dev  # http://localhost:3001

  Or use the startup script:
  cd petinsure360
  ./run.sh

  Data Flow

  1. Frontend â†’ User enters data (customer, pet, policy, claim)
  2. Backend API â†’ Validates and writes JSON to ADLS raw/ container
  3. Databricks ETL â†’ Picks up raw data, processes Bronze â†’ Silver â†’ Gold
  4. BI Dashboard â†’ Queries Gold layer via insights API
  
## License

This project is for demonstration purposes.
